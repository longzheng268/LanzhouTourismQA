# 数据库迁移说明

## 📋 当前架构说明

### Kotlin版本（当前）
- ✅ **使用本地JSON文件**：`src/main/resources/knowledge_base.json`
- ✅ **无需数据库服务器**
- ✅ **完全离线运行**
- ✅ **启动速度快**

### C++版本（原版）
- ❌ 使用MariaDB数据库
- ❌ 需要数据库服务器连接
- ❌ 需要网络连接到数据库

## 🎯 为什么改为JSON？

| 特性 | JSON方案 | 数据库方案 |
|------|----------|------------|
| 部署复杂度 | ⭐⭐⭐⭐⭐ 极简单 | ⭐⭐ 需要数据库 |
| 启动速度 | ⭐⭐⭐⭐⭐ <1秒 | ⭐⭐ 需要连接 |
| 离线支持 | ✅ 完全离线 | ❌ 需要网络 |
| 维护成本 | ⭐⭐⭐⭐⭐ 简单 | ⭐⭐⭐ 需要管理 |
| 适合场景 | 本地应用 | 多用户系统 |

## 📝 如果您需要使用数据库

### 方案A：使用原SQL脚本

如果您仍然想使用MariaDB数据库，可以使用C++项目的SQL脚本：

**文件位置**：
```
D:\Code_Project\Cpp Project\LLM_ContinuingEducation_QA\setup_database_fixed.sql
```

**使用方法**：
1. 在DBeaver中连接到MariaDB服务器
2. 打开 `setup_database_fixed.sql`
3. 执行整个脚本
4. 数据库和表将被创建并插入示例数据

**数据库信息**：
- 数据库名：`qa_database`
- 表1：`qa_pairs` - 问答对
- 表2：`chat_history` - 聊天历史
- 字符集：utf8mb4

### 方案B：将SQL转换为Kotlin数据库代码

如果您想在Kotlin项目中使用数据库，我可以帮您创建数据库访问层。需要以下步骤：

1. **添加数据库依赖**（build.gradle.kts）
2. **创建数据库连接管理器**
3. **修改QAService使用数据库**
4. **创建数据库初始化脚本**

让我为您创建一个Kotlin版本的数据库支持：

#### 1. 添加依赖（可选）

如果您需要数据库支持，在build.gradle.kts中添加：
```kotlin
// MariaDB JDBC驱动
implementation("org.mariadb.jdbc:mariadb-java-client:3.3.2")
```

#### 2. 创建数据库管理器

我可以为您创建一个Kotlin版本的数据库管理器，需要吗？

## 🚀 推荐方案

### 当前方案（JSON）- 推荐
**适合场景**：
- ✅ 单用户应用
- ✅ 本地运行
- ✅ 快速启动
- ✅ 简单部署

**优势**：
- 无需安装数据库
- 无需网络连接
- 启动更快
- 更容易维护

### 数据库方案 - 可选
**适合场景**：
- 多用户同时访问
- 需要数据持久化
- 需要复杂查询
- 大规模数据

## 📊 数据对比

### JSON知识库（当前）
```json
{
  "knowledge_base": [
    {
      "id": 1,
      "question": "兰州在哪里？",
      "answer": "兰州是甘肃省省会...",
      "category": "地理"
    }
  ]
}
```

### SQL数据库（原版）
```sql
CREATE TABLE qa_pairs (
    id INT AUTO_INCREMENT PRIMARY KEY,
    question TEXT NOT NULL,
    answer TEXT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

## 🔧 如何切换到数据库方案

如果您确实需要数据库支持，请告诉我，我可以：

1. **创建数据库连接模块**
2. **修改QAService使用数据库**
3. **提供数据库初始化脚本**
4. **添加配置选项**（JSON/数据库切换）

## 💡 建议

**当前方案（JSON）的优势**：
- ✅ 已经完成并可直接使用
- ✅ 无需额外配置
- ✅ 适合兰州旅游问答场景
- ✅ 知识库只有25条，JSON完全够用

**数据库方案的必要性**：
- ❌ 对于25条知识来说过于复杂
- ❌ 增加部署难度
- ❌ 需要额外维护数据库

## 📝 总结

当前Kotlin版本使用**本地JSON知识库**，这是经过优化的选择：
- 更简单
- 更快速
- 更易部署
- 完全满足需求

如果您有特殊需求需要使用数据库，请告诉我，我可以为您添加数据库支持。

---

**当前状态**：✅ 使用JSON方案，无需数据库
**数据库脚本**：已保存在C++项目目录，可随时使用
